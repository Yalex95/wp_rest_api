{"version":3,"file":"index.js","mappings":"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","sources":["webpack://bootscore-gallery/./src/modules/gallery.js","webpack://bootscore-gallery/external window \"jQuery\"","webpack://bootscore-gallery/webpack/bootstrap","webpack://bootscore-gallery/webpack/runtime/compat get default export","webpack://bootscore-gallery/webpack/runtime/define property getters","webpack://bootscore-gallery/webpack/runtime/hasOwnProperty shorthand","webpack://bootscore-gallery/webpack/runtime/make namespace object","webpack://bootscore-gallery/./src/index.js"],"sourcesContent":["import $ from 'jquery';\r\nclass Gallery{\r\n\r\n    constructor(){\r\n        this.events();\r\n    }\r\n    \r\n    events(){\r\n        $(\".delete-item\").on(\"click\",this.deleteItem.bind(this));\r\n        $('.upload-item').on('click',this.UploadItem.bind(this));\r\n        $('.create-item').on('click',this.createGallery.bind(this));\r\n    }\r\n\r\n    // Methods\r\n    deleteItem(e){\r\n        var thisGallery = $(e.target).parents('.gallery-wrap');\r\n        var thisItem = $(e.target).parents('.gallery-wrap');\r\n        $.ajax({\r\n            url: `${siteData.root_url}/wp-json/wp/v2/gallery/${thisGallery.data(\"id\")}`,\r\n            method: 'GET',\r\n            dataType: 'json',\r\n            success: (response) =>{\r\n\r\n                var galleryData = response;\r\n                \r\n                galleryData.acf.gallery = galleryData.acf.gallery.filter(function(item) {\r\n                    return item !== thisItem.data('imgid');\r\n                  });\r\n                  // Update the gallery with the modified data                 \r\n                  $.ajax({\r\n                    beforeSend: (xhr)=>{\r\n                        xhr.setRequestHeader(\"X-WP-NONCE\",siteData.nonce)\r\n                    },\r\n                    url:`${siteData.root_url}/wp-json/wp/v2/gallery/${thisGallery.data(\"id\")}`,\r\n                    method: 'PUT',\r\n                    dataType: 'json',\r\n                    data: JSON.stringify(galleryData),\r\n                    contentType: 'application/json',\r\n                    success: (response)=>{\r\n                        // remove \r\n                        thisItem.fadeOut();\r\n                        console.log(\"Removed succesfully: \"+response);\r\n                    },\r\n                    error: (error)=>{\r\n                        console.log(\"error: \"+error)\r\n                    }\r\n                  });\r\n            },\r\n            error: (error) => {\r\n                console.log('Error:')\r\n                console.log(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    UploadItem(e){\r\n        \r\n        var thisGallery = $(e.target).parents('.form-wrap');\r\n        // thisGallery.data(\"id\")\r\n\r\n        let imgFile = document.getElementById('formFile').files[0];\r\n        // Create a FormData object and append the image file\r\n        var formData = new FormData();\r\n        formData.append('file', imgFile);\r\n\r\n        //Make the AJAX request to upload the image\r\n        $.ajax({\r\n            url: `${siteData.root_url}/wp-json/wp/v2/media`,\r\n            method: 'POST',\r\n            processData: false,\r\n            contentType: false,\r\n            data: formData,\r\n            beforeSend: (xhr)=>{\r\n                xhr.setRequestHeader('X-WP-Nonce', siteData.nonce );\r\n            },\r\n            success: (response)=>{\r\n                var imgId = response.id;               \r\n                \r\n                $.ajax({\r\n                    url: `${siteData.root_url}/wp-json/wp/v2/gallery/${thisGallery.data(\"id\")}`,\r\n                    method: 'GET',\r\n                    dataType: 'json',\r\n                    success: (response)=>{\r\n                        console.log('added to the gallery');\r\n                        var galleryData = response;\r\n                        // add image to gallery data\r\n                        galleryData.acf.gallery.push(imgId);\r\n                        // update the gallery with the modified data\r\n                        $.ajax({\r\n                            url: `${siteData.root_url}/wp-json/wp/v2/gallery/${thisGallery.data(\"id\")}`,\r\n                            method: 'PUT',\r\n                            dataType: 'json',\r\n                            data: JSON.stringify(galleryData),\r\n                            contentType: 'application/json',\r\n                            beforeSend: (xhr)=>{\r\n                                xhr.setRequestHeader('X-WP-Nonce', siteData.nonce);\r\n                            },\r\n                            success: (response)=>{\r\n                                console.log('added to gallery');\r\n                            },\r\n                            error: (error)=>{\r\n                                console.log(\"Error uploading to gallery:\"+error)\r\n                            }\r\n                        })\r\n                    },\r\n                    error: (error)=>{\r\n                        console.log(\"Error uploading media:\"+error)\r\n                    }\r\n                });\r\n\r\n            },\r\n            error: ()=>{\r\n\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    createGallery(e){\r\n        let title = $('.gallery-title').val();\r\n        let imgFile = document.getElementById('formFileMultiple').files[0];\r\n        // Create a FormData object and append the image file\r\n        var formData = new FormData();\r\n        formData.append('file', imgFile);\r\n        \r\n        //Make the AJAX request to upload the image\r\n        $.ajax({\r\n            url: `${siteData.root_url}/wp-json/wp/v2/media`,\r\n            method: 'POST',\r\n            processData: false,\r\n            contentType: false,\r\n            data: formData,\r\n            beforeSend: (xhr)=>{\r\n                xhr.setRequestHeader('X-WP-Nonce', siteData.nonce );\r\n            },\r\n            success: (response)=>{\r\n                var imgId = response.id;               \r\n                var newGallery = {\r\n                    title : title,\r\n                    status: 'publish',\r\n                    content: '',\r\n                    acf: {gallery:[imgId] }\r\n                    // 'content': formData\r\n                }\r\n            $.ajax({\r\n                beforeSend: (xhr)=>{\r\n                    xhr.setRequestHeader('X-WP-Nonce', siteData.nonce);\r\n                },\r\n                url: `${siteData.root_url}/wp-json/wp/v2/gallery/`,\r\n                method: 'POST',\r\n                dataType: 'json',\r\n                data: newGallery,\r\n                success: (response)=>{\r\n                   console.log('success'+ response)\r\n                },\r\n                error: (error)=>{\r\n                    console.log('Error'+error)\r\n                }\r\n            });\r\n    },\r\n    error: (error)=>{\r\n        console.log('ERROR:'+error);\r\n    }\r\n});\r\n\r\n\r\n    }\r\n}\r\nexport default Gallery;","module.exports = window[\"jQuery\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\r\nimport Gallery from \"./modules/gallery\"\r\n\r\nconst gallery = new Gallery()"],"names":["$","Gallery","constructor","events","on","deleteItem","bind","UploadItem","createGallery","e","thisGallery","target","parents","thisItem","ajax","url","siteData","root_url","data","method","dataType","success","response","galleryData","acf","gallery","filter","item","beforeSend","xhr","setRequestHeader","nonce","JSON","stringify","contentType","fadeOut","console","log","error","imgFile","document","getElementById","files","formData","FormData","append","processData","imgId","id","push","title","val","newGallery","status","content"],"sourceRoot":""}